

facility_definitions:
  SupplierFacility: &supplier_facility
    class: "SupplierFacility"
    children:
      storage:
        class: "StorageUnit"
      products:
        class: "ProductUnit"
        is_template: true
        config:
          consumer:
            class: "ConsumerUnit"
          manufacture:
            class: "ManufactureUnit"


small_storage: &small_storage
  config:
    capacity: 100
    unit_storage_cost: 1

midium_storage: &midium_storage
  config:
    capacity: 200
    unit_storage_cost: 1

huge_storage: &huge_storage
  config:
    capacity: 300
    unit_storage_cost: 1


skus: &sku_definitions
  - id: 1
    name: "sku1"
    output_units_per_lot: 1
    bom:
      sku3: 1

  - id: 2
    name: "sku2"
    output_units_per_lot: 2
    bom:
      sku1: 4

  - id: 3
    name: "sku3"
    output_units_per_lot: 1

  - id: 4
    name: "sku4"
    output_units_per_lot: 2
    bom:
      sku2: 1


world:
  skus: *sku_definitions

  facilities:
    # This supplier will keep generate sku3, and should stop at tick 20 as reach the storage limitation
    - name: "Supplier_SKU3"
      definition_ref: "SupplierFacility"
      skus:
        sku3:
          init_in_stock: 80
          delay_order_penalty: 10
          product_unit_cost: 1
          type: "production"
          cost": 10
          price": 10
      children:
        storage: *small_storage
    - name: "Supplier_SKU1"
      definition_ref: "SupplierFacility"
      skus:
        sku1:
          init_in_stock: 50
          delay_order_penalty: 10
          product_unit_cost: 1
          type: "production"
          cost: 10
          price: 100
        sku3:
          init_in_stock: 80
          delay_order_penalty: 10
          type: "material"
          cost: 10
          price: 100
      children:
        storage: *midium_storage
    - name: "Supplier_SKU2"
      definition_ref: "SupplierFacility"
      skus:
        sku2:
          init_in_stock: 50
          delay_order_penalty: 10
          product_unit_cost: 1
          type: "production"
          cost: 10
          price: 100
        sku1:
          init_in_stock: 50
          delay_order_penalty: 10
          type: "material"
          cost: 10
          price: 100
      children:
        storage: *midium_storage
    - name: "Supplier_SKU4"
      definition_ref: "SupplierFacility"
      skus:
        sku4:
          init_in_stock: 50
          delay_order_penalty: 10
          product_unit_cost: 4
          type: "production"
          cost: 10
          price: 100
        sku2:
          init_in_stock: 0
          delay_order_penalty: 10
          type: "material"
          cost: 10
          price: 100
      children:
        storage: *midium_storage

  topology:
    Supplier_SKU1:
      sku3:
        - "Supplier_SKU3"
    Supplier_SKU2:
      sku1:
        - "Supplier_SKU1"
    Supplier_SKU4:
      sku2:
        - "Supplier_SKU2"

  grid:
    size: [20, 20]

    facilities:
      Supplier_SKU1: [0, 0]
      Supplier_SKU2: [3, 3]
      Supplier_SKU3: [6, 6]
      Supplier_SKU4: [10, 18]

    blocks:
      railroad:
        - [10, 10]
        - [10, 11]
        - [10, 12]
        - [11, 12]
